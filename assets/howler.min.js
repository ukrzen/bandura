(function(){'use strict';var n=function(){this.init()};n.prototype={init:function(){var p=this||t;return p._counter=1e3,p._codecs={},p._howls=[],p._muted=!1,p._volume=1,p._canPlayEvent='canplaythrough',p._navigator='undefined'!=typeof window&&window.navigator?window.navigator:null,p.masterGain=null,p.noAudio=!1,p.usingWebAudio=!0,p.autoSuspend=!0,p.ctx=null,p.mobileAutoEnable=!0,p._setup(),p},volume:function(p){var f=this||t;if(p=parseFloat(p),f.ctx||c(),'undefined'!=typeof p&&0<=p&&1>=p){if(f._volume=p,f._muted)return f;f.usingWebAudio&&f.masterGain.gain.setValueAtTime(p,t.ctx.currentTime);for(var m=0;m<f._howls.length;m++)if(!f._howls[m]._webAudio)for(var b,g=f._howls[m]._getSoundIds(),A=0;A<g.length;A++)b=f._howls[m]._soundById(g[A]),b&&b._node&&(b._node.volume=b._volume*p);return f}return f._volume},mute:function(p){var f=this||t;f.ctx||c(),f._muted=p,f.usingWebAudio&&f.masterGain.gain.setValueAtTime(p?0:f._volume,t.ctx.currentTime);for(var m=0;m<f._howls.length;m++)if(!f._howls[m]._webAudio)for(var b,g=f._howls[m]._getSoundIds(),A=0;A<g.length;A++)b=f._howls[m]._soundById(g[A]),b&&b._node&&(b._node.muted=!!p||b._muted);return f},unload:function(){for(var p=this||t,f=p._howls.length-1;0<=f;f--)p._howls[f].unload();return p.usingWebAudio&&p.ctx&&'undefined'!=typeof p.ctx.close&&(p.ctx.close(),p.ctx=null,c()),p},codecs:function(p){return(this||t)._codecs[p.replace(/^x-/,'')]},_setup:function(){var p=this||t;if(p.state=p.ctx?p.ctx.state||'running':'running',p._autoSuspend(),!p.usingWebAudio)if('undefined'!=typeof Audio)try{var f=new Audio;'undefined'==typeof f.oncanplaythrough&&(p._canPlayEvent='canplay')}catch(m){p.noAudio=!0}else p.noAudio=!0;try{var f=new Audio;f.muted&&(p.noAudio=!0)}catch(m){}return p.noAudio||p._setupCodecs(),p},_setupCodecs:function(){var p=this||t,f=null;try{f='undefined'==typeof Audio?null:new Audio}catch(b){return p}if(!f||'function'!=typeof f.canPlayType)return p;var m=f.canPlayType('audio/mpeg;').replace(/^no$/,''),g=p._navigator&&p._navigator.userAgent.match(/OPR\/([0-6].)/g),A=g&&33>parseInt(g[0].split('/')[1],10);return p._codecs={mp3:!!(!A&&(m||f.canPlayType('audio/mp3;').replace(/^no$/,''))),mpeg:!!m,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,''),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,''),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,''),wav:!!f.canPlayType('audio/wav; codecs="1"').replace(/^no$/,''),aac:!!f.canPlayType('audio/aac;').replace(/^no$/,''),caf:!!f.canPlayType('audio/x-caf;').replace(/^no$/,''),m4a:!!(f.canPlayType('audio/x-m4a;')||f.canPlayType('audio/m4a;')||f.canPlayType('audio/aac;')).replace(/^no$/,''),mp4:!!(f.canPlayType('audio/x-mp4;')||f.canPlayType('audio/mp4;')||f.canPlayType('audio/aac;')).replace(/^no$/,''),weba:!!f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,''),webm:!!f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,''),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,''),flac:!!(f.canPlayType('audio/x-flac;')||f.canPlayType('audio/flac;')).replace(/^no$/,'')},p},_enableMobileAudio:function(){var p=this||t,f=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome/i.test(p._navigator&&p._navigator.userAgent);if(!p._mobileEnabled&&p.ctx&&f){p._mobileEnabled=!1,p.mobileAutoEnable=!1,p._mobileUnloaded||44100===p.ctx.sampleRate||(p._mobileUnloaded=!0,p.unload()),p._scratchBuffer=p.ctx.createBuffer(1,1,22050);var m=function(){t._autoResume();var A=p.ctx.createBufferSource();A.buffer=p._scratchBuffer,A.connect(p.ctx.destination),'undefined'==typeof A.start?A.noteOn(0):A.start(0),'function'==typeof p.ctx.resume&&p.ctx.resume(),A.onended=function(){A.disconnect(0),p._mobileEnabled=!0,document.removeEventListener('touchstart',m,!0),document.removeEventListener('touchend',m,!0),document.removeEventListener('click',m,!0);for(var b=0;b<p._howls.length;b++)p._howls[b]._emit('unlock')}};return document.addEventListener('touchstart',m,!0),document.addEventListener('touchend',m,!0),document.addEventListener('click',m,!0),p}},_autoSuspend:function(){var p=this;if(p.autoSuspend&&p.ctx&&'undefined'!=typeof p.ctx.suspend&&t.usingWebAudio){for(var f=0;f<p._howls.length;f++)if(p._howls[f]._webAudio)for(var m=0;m<p._howls[f]._sounds.length;m++)if(!p._howls[f]._sounds[m]._paused)return p;return p._suspendTimer&&clearTimeout(p._suspendTimer),p._suspendTimer=setTimeout(function(){p.autoSuspend&&(p._suspendTimer=null,p.state='suspending',p.ctx.suspend().then(function(){p.state='suspended',p._resumeAfterSuspend&&(delete p._resumeAfterSuspend,p._autoResume())}))},3e4),p}},_autoResume:function(){var p=this;if(p.ctx&&'undefined'!=typeof p.ctx.resume&&t.usingWebAudio)return'running'===p.state&&p._suspendTimer?(clearTimeout(p._suspendTimer),p._suspendTimer=null):'suspended'===p.state?(p.ctx.resume().then(function(){p.state='running';for(var f=0;f<p._howls.length;f++)p._howls[f]._emit('resume')}),p._suspendTimer&&(clearTimeout(p._suspendTimer),p._suspendTimer=null)):'suspending'===p.state&&(p._resumeAfterSuspend=!0),p}};var t=new n,r=function(p){var f=this;return p.src&&0!==p.src.length?void f.init(p):void console.error('An array of source files must be passed with any new Howl.')};r.prototype={init:function(p){var f=this;return t.ctx||c(),f._autoplay=p.autoplay||!1,f._format='string'==typeof p.format?[p.format]:p.format,f._html5=p.html5||!1,f._muted=p.mute||!1,f._loop=p.loop||!1,f._pool=p.pool||5,f._preload='boolean'!=typeof p.preload||p.preload,f._rate=p.rate||1,f._sprite=p.sprite||{},f._src='string'==typeof p.src?[p.src]:p.src,f._volume=void 0===p.volume?1:p.volume,f._xhrWithCredentials=p.xhrWithCredentials||!1,f._duration=0,f._state='unloaded',f._sounds=[],f._endTimers={},f._queue=[],f._playLock=!1,f._onend=p.onend?[{fn:p.onend}]:[],f._onfade=p.onfade?[{fn:p.onfade}]:[],f._onload=p.onload?[{fn:p.onload}]:[],f._onloaderror=p.onloaderror?[{fn:p.onloaderror}]:[],f._onplayerror=p.onplayerror?[{fn:p.onplayerror}]:[],f._onpause=p.onpause?[{fn:p.onpause}]:[],f._onplay=p.onplay?[{fn:p.onplay}]:[],f._onstop=p.onstop?[{fn:p.onstop}]:[],f._onmute=p.onmute?[{fn:p.onmute}]:[],f._onvolume=p.onvolume?[{fn:p.onvolume}]:[],f._onrate=p.onrate?[{fn:p.onrate}]:[],f._onseek=p.onseek?[{fn:p.onseek}]:[],f._onunlock=p.onunlock?[{fn:p.onunlock}]:[],f._onresume=[],f._webAudio=t.usingWebAudio&&!f._html5,'undefined'!=typeof t.ctx&&t.ctx&&t.mobileAutoEnable&&t._enableMobileAudio(),t._howls.push(f),f._autoplay&&f._queue.push({event:'play',action:function(){f.play()}}),f._preload&&f.load(),f},load:function(){var p=this,f=null;if(t.noAudio)return void p._emit('loaderror',null,'No audio support.');'string'==typeof p._src&&(p._src=[p._src]);for(var m=0;m<p._src.length;m++){var g,A;if(p._format&&p._format[m])g=p._format[m];else{if(A=p._src[m],'string'!=typeof A){p._emit('loaderror',null,'Non-string found in selected audio sources - ignoring.');continue}g=/^data:audio\/([^;,]+);/i.exec(A),g||(g=/\.([^.]+)$/.exec(A.split('?',1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&t.codecs(g)){f=p._src[m];break}}return f?(p._src=f,p._state='loading','https:'===window.location.protocol&&'http:'===f.slice(0,5)&&(p._html5=!0,p._webAudio=!1),new a(p),p._webAudio&&_(p),p):void p._emit('loaderror',null,'No codec support for selected audio sources.')},play:function(p,f){var m=this,g=null;if('number'==typeof p)g=p,p=null;else{if('string'==typeof p&&'loaded'===m._state&&!m._sprite[p])return null;if('undefined'==typeof p){p='__default';for(var A=0,b=0;b<m._sounds.length;b++)m._sounds[b]._paused&&!m._sounds[b]._ended&&(A++,g=m._sounds[b]._id);1==A?p=null:g=null}}var h=g?m._soundById(g):m._inactiveSound();if(!h)return null;if(g&&!p&&(p=h._sprite||'__default'),'loaded'!==m._state){h._sprite=p,h._ended=!1;var T=h._id;return m._queue.push({event:'play',action:function(){m.play(T)}}),T}if(g&&!h._paused)return f||m._loadQueue('play'),h._id;m._webAudio&&t._autoResume();var v=Math.max(0,0<h._seek?h._seek:m._sprite[p][0]/1e3),w=Math.max(0,(m._sprite[p][0]+m._sprite[p][1])/1e3-v),S=1e3*w/Math.abs(h._rate);if(h._paused=!1,h._ended=!1,h._sprite=p,h._seek=v,h._start=m._sprite[p][0]/1e3,h._stop=(m._sprite[p][0]+m._sprite[p][1])/1e3,h._loop=!!(h._loop||m._sprite[p][2]),h._seek>=h._stop)return void m._ended(h);var k=h._node;if(m._webAudio){var I=function(){m._refreshBuffer(h);var M=h._muted||m._muted?0:h._volume;k.gain.setValueAtTime(M,t.ctx.currentTime),h._playStart=t.ctx.currentTime,'undefined'==typeof k.bufferSource.start?h._loop?k.bufferSource.noteGrainOn(0,v,86400):k.bufferSource.noteGrainOn(0,v,w):h._loop?k.bufferSource.start(0,v,86400):k.bufferSource.start(0,v,w),S!=Infinity&&(m._endTimers[h._id]=setTimeout(m._ended.bind(m,h),S)),f||setTimeout(function(){m._emit('play',h._id)},0)};'running'===t.state?I():(m.once('resume',I),m._clearTimer(h._id))}else{var O=function(){k.currentTime=v,k.muted=h._muted||m._muted||t._muted||k.muted,k.volume=h._volume*t.volume(),k.playbackRate=h._rate;try{var M=k.play();if(M&&'undefined'!=typeof Promise&&(M instanceof Promise||'function'==typeof M.then)?(m._playLock=!0,M.then(function(){m._playLock=!1,f||m._emit('play',h._id)}).catch(function(){m._playLock=!1,m._emit('playerror',h._id,'Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.')})):!f&&m._emit('play',h._id),k.playbackRate=h._rate,k.paused)return void m._emit('playerror',h._id,'Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.');'__default'!==p||h._loop?m._endTimers[h._id]=setTimeout(m._ended.bind(m,h),S):(m._endTimers[h._id]=function(){m._ended(h),k.removeEventListener('ended',m._endTimers[h._id],!1)},k.addEventListener('ended',m._endTimers[h._id],!1))}catch(F){m._emit('playerror',h._id,F)}},B=window&&window.ejecta||!k.readyState&&t._navigator.isCocoonJS;if(3<=k.readyState||B)O();else{var D=function(){O(),k.removeEventListener(t._canPlayEvent,D,!1)};k.addEventListener(t._canPlayEvent,D,!1),m._clearTimer(h._id)}}return h._id},pause:function(p){var f=this;if('loaded'!==f._state||f._playLock)return f._queue.push({event:'pause',action:function(){f.pause(p)}}),f;for(var m=f._getSoundIds(p),g=0;g<m.length;g++){f._clearTimer(m[g]);var A=f._soundById(m[g]);if(A&&!A._paused&&(A._seek=f.seek(m[g]),A._rateSeek=0,A._paused=!0,f._stopFade(m[g]),A._node))if(f._webAudio){if(!A._node.bufferSource)continue;'undefined'==typeof A._node.bufferSource.stop?A._node.bufferSource.noteOff(0):A._node.bufferSource.stop(0),f._cleanBuffer(A._node)}else isNaN(A._node.duration)&&A._node.duration!==Infinity||A._node.pause();arguments[1]||f._emit('pause',A?A._id:null)}return f},stop:function(p,f){var m=this;if('loaded'!==m._state||m._playLock)return m._queue.push({event:'stop',action:function(){m.stop(p)}}),m;for(var g=m._getSoundIds(p),A=0;A<g.length;A++){m._clearTimer(g[A]);var b=m._soundById(g[A]);b&&(b._seek=b._start||0,b._rateSeek=0,b._paused=!0,b._ended=!0,m._stopFade(g[A]),b._node&&(m._webAudio?b._node.bufferSource&&('undefined'==typeof b._node.bufferSource.stop?b._node.bufferSource.noteOff(0):b._node.bufferSource.stop(0),m._cleanBuffer(b._node)):(!isNaN(b._node.duration)||b._node.duration===Infinity)&&(b._node.currentTime=b._start||0,b._node.pause())),!f&&m._emit('stop',b._id))}return m},mute:function(p,f){var m=this;if('loaded'!==m._state||m._playLock)return m._queue.push({event:'mute',action:function(){m.mute(p,f)}}),m;if('undefined'==typeof f)if('boolean'==typeof p)m._muted=p;else return m._muted;for(var b,g=m._getSoundIds(f),A=0;A<g.length;A++)b=m._soundById(g[A]),b&&(b._muted=p,b._interval&&m._stopFade(b._id),m._webAudio&&b._node?b._node.gain.setValueAtTime(p?0:b._volume,t.ctx.currentTime):b._node&&(b._node.muted=!!t._muted||p),m._emit('mute',b._id));return m},volume:function(){var p=this,f=arguments,m,g;if(0===f.length)return p._volume;if(1===f.length||2===f.length&&'undefined'==typeof f[1]){var A=p._getSoundIds(),b=A.indexOf(f[0]);0<=b?g=parseInt(f[0],10):m=parseFloat(f[0])}else 2<=f.length&&(m=parseFloat(f[0]),g=parseInt(f[1],10));var h;if('undefined'!=typeof m&&0<=m&&1>=m){if('loaded'!==p._state||p._playLock)return p._queue.push({event:'volume',action:function(){p.volume.apply(p,f)}}),p;'undefined'==typeof g&&(p._volume=m),g=p._getSoundIds(g);for(var T=0;T<g.length;T++)h=p._soundById(g[T]),h&&(h._volume=m,!f[2]&&p._stopFade(g[T]),p._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(m,t.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=m*t.volume()),p._emit('volume',h._id))}else return h=g?p._soundById(g):p._sounds[0],h?h._volume:0;return p},fade:function(p,f,m,g){var A=this;if('loaded'!==A._state||A._playLock)return A._queue.push({event:'fade',action:function(){A.fade(p,f,m,g)}}),A;A.volume(p,g);for(var T,b=A._getSoundIds(g),h=0;h<b.length;h++)if(T=A._soundById(b[h]),T){if(g||A._stopFade(b[h]),A._webAudio&&!T._muted){var v=t.ctx.currentTime;T._volume=p,T._node.gain.setValueAtTime(p,v),T._node.gain.linearRampToValueAtTime(f,v+m/1e3)}A._startFadeInterval(T,p,f,m,b[h],'undefined'==typeof g)}return A},_startFadeInterval:function(p,f,m,g,A,b){var h=this,T=f,v=m-f,w=Math.abs(v/0.01),S=Math.max(4,0<w?g/w:g),k=Date.now();p._fadeTo=m,p._interval=setInterval(function(){var I=(Date.now()-k)/g;k=Date.now(),T+=v*I,T=Math.max(0,T),T=Math.min(1,T),T=Math.round(100*T)/100,h._webAudio?p._volume=T:h.volume(T,p._id,!0),b&&(h._volume=T),(m<f&&T<=m||m>f&&T>=m)&&(clearInterval(p._interval),p._interval=null,p._fadeTo=null,h.volume(m,p._id),h._emit('fade',p._id))},S)},_stopFade:function(p){var f=this,m=f._soundById(p);return m&&m._interval&&(f._webAudio&&m._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(m._interval),m._interval=null,f.volume(m._fadeTo,p),m._fadeTo=null,f._emit('fade',p)),f},loop:function(){var p=this,f=arguments,m,g,A;if(0===f.length)return p._loop;if(1!==f.length)2===f.length&&(m=f[0],g=parseInt(f[1],10));else if('boolean'==typeof f[0])m=f[0],p._loop=m;else return A=p._soundById(parseInt(f[0],10)),!!A&&A._loop;for(var b=p._getSoundIds(g),h=0;h<b.length;h++)A=p._soundById(b[h]),A&&(A._loop=m,p._webAudio&&A._node&&A._node.bufferSource&&(A._node.bufferSource.loop=m,m&&(A._node.bufferSource.loopStart=A._start||0,A._node.bufferSource.loopEnd=A._stop)));return p},rate:function(){var p=this,f=arguments,m,g;if(0===f.length)g=p._sounds[0]._id;else if(1===f.length){var A=p._getSoundIds(),b=A.indexOf(f[0]);0<=b?g=parseInt(f[0],10):m=parseFloat(f[0])}else 2===f.length&&(m=parseFloat(f[0]),g=parseInt(f[1],10));var h;if('number'==typeof m){if('loaded'!==p._state||p._playLock)return p._queue.push({event:'rate',action:function(){p.rate.apply(p,f)}}),p;'undefined'==typeof g&&(p._rate=m),g=p._getSoundIds(g);for(var T=0;T<g.length;T++)if(h=p._soundById(g[T]),h){h._rateSeek=p.seek(g[T]),h._playStart=p._webAudio?t.ctx.currentTime:h._playStart,h._rate=m,p._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.setValueAtTime(m,t.ctx.currentTime):h._node&&(h._node.playbackRate=m);var v=p.seek(g[T]),w=(p._sprite[h._sprite][0]+p._sprite[h._sprite][1])/1e3-v,S=1e3*w/Math.abs(h._rate);(p._endTimers[g[T]]||!h._paused)&&(p._clearTimer(g[T]),p._endTimers[g[T]]=setTimeout(p._ended.bind(p,h),S)),p._emit('rate',h._id)}}else return h=p._soundById(g),h?h._rate:p._rate;return p},seek:function(){var p=this,f=arguments,m,g;if(0===f.length)g=p._sounds[0]._id;else if(1===f.length){var A=p._getSoundIds(),b=A.indexOf(f[0]);0<=b?g=parseInt(f[0],10):p._sounds.length&&(g=p._sounds[0]._id,m=parseFloat(f[0]))}else 2===f.length&&(m=parseFloat(f[0]),g=parseInt(f[1],10));if('undefined'==typeof g)return p;if('loaded'!==p._state||p._playLock)return p._queue.push({event:'seek',action:function(){p.seek.apply(p,f)}}),p;var h=p._soundById(g);if(h)if('number'==typeof m&&0<=m){var T=p.playing(g);T&&p.pause(g,!0),h._seek=m,h._ended=!1,p._clearTimer(g),!p._webAudio&&h._node&&(h._node.currentTime=m);var v=function(){p._emit('seek',g),T&&p.play(g,!0)};if(T&&!p._webAudio){var w=function(){p._playLock?setTimeout(w,0):v()};setTimeout(w,0)}else v()}else{if(p._webAudio){var S=p.playing(g)?t.ctx.currentTime-h._playStart:0,k=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(k+S*Math.abs(h._rate))}return h._node.currentTime}return p},playing:function(p){var f=this;if('number'==typeof p){var m=f._soundById(p);return!!m&&!m._paused}for(var g=0;g<f._sounds.length;g++)if(!f._sounds[g]._paused)return!0;return!1},duration:function(p){var f=this,m=f._duration,g=f._soundById(p);return g&&(m=f._sprite[g._sprite][1]/1e3),m},state:function(){return this._state},unload:function(){for(var p=this,f=p._sounds,m=0;m<f.length;m++){if(f[m]._paused||p.stop(f[m]._id),!p._webAudio){var g=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);g||(f[m]._node.src='data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA'),f[m]._node.removeEventListener('error',f[m]._errorFn,!1),f[m]._node.removeEventListener(t._canPlayEvent,f[m]._loadFn,!1)}delete f[m]._node,p._clearTimer(f[m]._id)}var A=t._howls.indexOf(p);0<=A&&t._howls.splice(A,1);var b=!0;for(m=0;m<t._howls.length;m++)if(t._howls[m]._src===p._src){b=!1;break}return d&&b&&delete d[p._src],t.noAudio=!1,p._state='unloaded',p._sounds=[],p=null,null},on:function(p,f,m,g){var A=this,b=A['_on'+p];return'function'==typeof f&&b.push(g?{id:m,fn:f,once:g}:{id:m,fn:f}),A},off:function(p,f,m){var g=this,A=g['_on'+p],b=0;if('number'==typeof f&&(m=f,f=null),f||m)for(b=0;b<A.length;b++){var h=m===A[b].id;if(f===A[b].fn&&h||!f&&h){A.splice(b,1);break}}else if(p)g['_on'+p]=[];else{var T=Object.keys(g);for(b=0;b<T.length;b++)0===T[b].indexOf('_on')&&Array.isArray(g[T[b]])&&(g[T[b]]=[])}return g},once:function(p,f,m){var g=this;return g.on(p,f,m,1),g},_emit:function(p,f,m){for(var g=this,A=g['_on'+p],b=A.length-1;0<=b;b--)A[b].id&&A[b].id!==f&&'load'!==p||(setTimeout(function(h){h.call(this,f,m)}.bind(g,A[b].fn),0),A[b].once&&g.off(p,A[b].fn,A[b].id));return g._loadQueue(p),g},_loadQueue:function(p){var f=this;if(0<f._queue.length){var m=f._queue[0];m.event===p&&(f._queue.shift(),f._loadQueue()),p||m.action()}return f},_ended:function(p){var f=this,m=p._sprite;if(!f._webAudio&&p._node&&!p._node.paused&&!p._node.ended&&p._node.currentTime<p._stop)return setTimeout(f._ended.bind(f,p),100),f;var g=!!(p._loop||f._sprite[m][2]);if(f._emit('end',p._id),!f._webAudio&&g&&f.stop(p._id,!0).play(p._id),f._webAudio&&g){f._emit('play',p._id),p._seek=p._start||0,p._rateSeek=0,p._playStart=t.ctx.currentTime;var A=1e3*(p._stop-p._start)/Math.abs(p._rate);f._endTimers[p._id]=setTimeout(f._ended.bind(f,p),A)}return f._webAudio&&!g&&(p._paused=!0,p._ended=!0,p._seek=p._start||0,p._rateSeek=0,f._clearTimer(p._id),f._cleanBuffer(p._node),t._autoSuspend()),f._webAudio||g||f.stop(p._id,!0),f},_clearTimer:function(p){var f=this;if(f._endTimers[p]){if('function'!=typeof f._endTimers[p])clearTimeout(f._endTimers[p]);else{var m=f._soundById(p);m&&m._node&&m._node.removeEventListener('ended',f._endTimers[p],!1)}delete f._endTimers[p]}return f},_soundById:function(p){for(var f=this,m=0;m<f._sounds.length;m++)if(p===f._sounds[m]._id)return f._sounds[m];return null},_inactiveSound:function(){var p=this;p._drain();for(var f=0;f<p._sounds.length;f++)if(p._sounds[f]._ended)return p._sounds[f].reset();return new a(p)},_drain:function(){var p=this,f=p._pool,m=0,g=0;if(!(p._sounds.length<f)){for(g=0;g<p._sounds.length;g++)p._sounds[g]._ended&&m++;for(g=p._sounds.length-1;0<=g;g--){if(m<=f)return;p._sounds[g]._ended&&(p._webAudio&&p._sounds[g]._node&&p._sounds[g]._node.disconnect(0),p._sounds.splice(g,1),m--)}}},_getSoundIds:function(p){var f=this;if('undefined'==typeof p){for(var m=[],g=0;g<f._sounds.length;g++)m.push(f._sounds[g]._id);return m}return[p]},_refreshBuffer:function(p){var f=this;return p._node.bufferSource=t.ctx.createBufferSource(),p._node.bufferSource.buffer=d[f._src],p._panner?p._node.bufferSource.connect(p._panner):p._node.bufferSource.connect(p._node),p._node.bufferSource.loop=p._loop,p._loop&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop||0),p._node.bufferSource.playbackRate.setValueAtTime(p._rate,t.ctx.currentTime),f},_cleanBuffer:function(p){var f=this;if(t._scratchBuffer&&p.bufferSource){p.bufferSource.onended=null,p.bufferSource.disconnect(0);try{p.bufferSource.buffer=t._scratchBuffer}catch(m){}}return p.bufferSource=null,f}};var a=function(p){this._parent=p,this.init()};a.prototype={init:function(){var p=this,f=p._parent;return p._muted=f._muted,p._loop=f._loop,p._volume=f._volume,p._rate=f._rate,p._seek=0,p._paused=!0,p._ended=!0,p._sprite='__default',p._id=++t._counter,f._sounds.push(p),p.create(),p},create:function(){var p=this,f=p._parent,m=t._muted||p._muted||p._parent._muted?0:p._volume;return f._webAudio?(p._node='undefined'==typeof t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),p._node.gain.setValueAtTime(m,t.ctx.currentTime),p._node.paused=!0,p._node.connect(t.masterGain)):(p._node=new Audio,p._errorFn=p._errorListener.bind(p),p._node.addEventListener('error',p._errorFn,!1),p._loadFn=p._loadListener.bind(p),p._node.addEventListener(t._canPlayEvent,p._loadFn,!1),p._node.src=f._src,p._node.preload='auto',p._node.volume=m*t.volume(),p._node.load()),p},reset:function(){var p=this,f=p._parent;return p._muted=f._muted,p._loop=f._loop,p._volume=f._volume,p._rate=f._rate,p._seek=0,p._rateSeek=0,p._paused=!0,p._ended=!0,p._sprite='__default',p._id=++t._counter,p},_errorListener:function(){var p=this;p._parent._emit('loaderror',p._id,p._node.error?p._node.error.code:0),p._node.removeEventListener('error',p._errorFn,!1)},_loadListener:function(){var p=this,f=p._parent;f._duration=Math.ceil(10*p._node.duration)/10,0===Object.keys(f._sprite).length&&(f._sprite={__default:[0,1e3*f._duration]}),'loaded'!==f._state&&(f._state='loaded',f._emit('load'),f._loadQueue()),p._node.removeEventListener(t._canPlayEvent,p._loadFn,!1)}};var d={},_=function(p){var f=p._src;if(d[f])return p._duration=d[f].duration,void l(p);if(/^data:[^;]+;base64,/.test(f)){for(var m=atob(f.split(',')[1]),g=new Uint8Array(m.length),A=0;A<m.length;++A)g[A]=m.charCodeAt(A);s(g.buffer,p)}else{var b=new XMLHttpRequest;b.open('GET',f,!0),b.withCredentials=p._xhrWithCredentials,b.responseType='arraybuffer',b.onload=function(){var h=(b.status+'')[0];return'0'!==h&&'2'!==h&&'3'!==h?void p._emit('loaderror',null,'Failed loading audio file with status: '+b.status+'.'):void s(b.response,p)},b.onerror=function(){p._webAudio&&(p._html5=!0,p._webAudio=!1,p._sounds=[],delete d[f],p.load())},u(b)}},u=function(p){try{p.send()}catch(f){p.onerror()}},s=function(p,f){var m=function(){f._emit('loaderror',null,'Decoding audio data failed.')},g=function(A){A&&0<f._sounds.length?(d[f._src]=A,l(f,A)):m()};'undefined'!=typeof Promise&&1===t.ctx.decodeAudioData.length?t.ctx.decodeAudioData(p).then(g).catch(m):t.ctx.decodeAudioData(p,g,m)},l=function(p,f){f&&!p._duration&&(p._duration=f.duration),0===Object.keys(p._sprite).length&&(p._sprite={__default:[0,1e3*p._duration]}),'loaded'!==p._state&&(p._state='loaded',p._emit('load'),p._loadQueue())},c=function(){try{'undefined'==typeof AudioContext?'undefined'==typeof webkitAudioContext?t.usingWebAudio=!1:t.ctx=new webkitAudioContext:t.ctx=new AudioContext}catch(A){t.usingWebAudio=!1}var p=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),f=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),m=f?parseInt(f[1],10):null;if(p&&m&&9>m){var g=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());(t._navigator&&t._navigator.standalone&&!g||t._navigator&&!t._navigator.standalone&&!g)&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain='undefined'==typeof t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:1,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()};'function'==typeof define&&define.amd&&define([],function(){return{Howler:t,Howl:r}}),'undefined'!=typeof exports&&(exports.Howler=t,exports.Howl=r),'undefined'==typeof window?'undefined'!=typeof global&&(global.HowlerGlobal=n,global.Howler=t,global.Howl=r,global.Sound=a):(window.HowlerGlobal=n,window.Howler=t,window.Howl=r,window.Sound=a)})(),function(){'use strict';HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var a=r._howls.length-1;0<=a;a--)r._howls[a].stereo(t);return r},HowlerGlobal.prototype.pos=function(t,r,a){var d=this;if(!d.ctx||!d.ctx.listener)return d;if(r='number'==typeof r?r:d._pos[1],a='number'==typeof a?a:d._pos[2],'number'==typeof t)d._pos=[t,r,a],'undefined'==typeof d.ctx.listener.positionX?d.ctx.listener.setPosition(d._pos[0],d._pos[1],d._pos[2]):(d.ctx.listener.positionX.setTargetAtTime(d._pos[0],Howler.ctx.currentTime,0.1),d.ctx.listener.positionY.setTargetAtTime(d._pos[1],Howler.ctx.currentTime,0.1),d.ctx.listener.positionZ.setTargetAtTime(d._pos[2],Howler.ctx.currentTime,0.1));else return d._pos;return d},HowlerGlobal.prototype.orientation=function(t,r,a,d,_,u){var s=this;if(!s.ctx||!s.ctx.listener)return s;var l=s._orientation;if(r='number'==typeof r?r:l[1],a='number'==typeof a?a:l[2],d='number'==typeof d?d:l[3],_='number'==typeof _?_:l[4],u='number'==typeof u?u:l[5],'number'==typeof t)s._orientation=[t,r,a,d,_,u],'undefined'==typeof s.ctx.listener.forwardX?s.ctx.listener.setOrientation(t,r,a,d,_,u):(s.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,0.1),s.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,0.1),s.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,0.1),s.ctx.listener.upX.setTargetAtTime(t,Howler.ctx.currentTime,0.1),s.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,0.1),s.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,0.1));else return l;return s},Howl.prototype.init=function(t){return function(r){var a=this;return a._orientation=r.orientation||[1,0,0],a._stereo=r.stereo||null,a._pos=r.pos||null,a._pannerAttr={coneInnerAngle:'undefined'==typeof r.coneInnerAngle?360:r.coneInnerAngle,coneOuterAngle:'undefined'==typeof r.coneOuterAngle?360:r.coneOuterAngle,coneOuterGain:'undefined'==typeof r.coneOuterGain?0:r.coneOuterGain,distanceModel:'undefined'==typeof r.distanceModel?'inverse':r.distanceModel,maxDistance:'undefined'==typeof r.maxDistance?1e4:r.maxDistance,panningModel:'undefined'==typeof r.panningModel?'HRTF':r.panningModel,refDistance:'undefined'==typeof r.refDistance?1:r.refDistance,rolloffFactor:'undefined'==typeof r.rolloffFactor?1:r.rolloffFactor},a._onstereo=r.onstereo?[{fn:r.onstereo}]:[],a._onpos=r.onpos?[{fn:r.onpos}]:[],a._onorientation=r.onorientation?[{fn:r.onorientation}]:[],t.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var a=this;if(!a._webAudio)return a;if('loaded'!==a._state)return a._queue.push({event:'stereo',action:function(){a.stereo(t,r)}}),a;var d='undefined'==typeof Howler.ctx.createStereoPanner?'spatial':'stereo';if('undefined'==typeof r)if('number'==typeof t)a._stereo=t,a._pos=[t,0,0];else return a._stereo;for(var s,_=a._getSoundIds(r),u=0;u<_.length;u++)if(s=a._soundById(_[u]),s)if('number'==typeof t)s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel='equalpower',(!s._panner||!s._panner.pan)&&n(s,d),'spatial'==d?'undefined'==typeof s._panner.positionX?s._panner.setPosition(t,0,0):(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),a._emit('stereo',s._id);else return s._stereo;return a},Howl.prototype.pos=function(t,r,a,d){var _=this;if(!_._webAudio)return _;if('loaded'!==_._state)return _._queue.push({event:'pos',action:function(){_.pos(t,r,a,d)}}),_;if(r='number'==typeof r?r:0,a='number'==typeof a?a:-0.5,'undefined'==typeof d)if('number'==typeof t)_._pos=[t,r,a];else return _._pos;for(var l,u=_._getSoundIds(d),s=0;s<u.length;s++)if(l=_._soundById(u[s]),l)if('number'==typeof t)l._pos=[t,r,a],l._node&&((!l._panner||l._panner.pan)&&n(l,'spatial'),'undefined'==typeof l._panner.positionX?l._panner.setOrientation(t,r,a):(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime))),_._emit('pos',l._id);else return l._pos;return _},Howl.prototype.orientation=function(t,r,a,d){var _=this;if(!_._webAudio)return _;if('loaded'!==_._state)return _._queue.push({event:'orientation',action:function(){_.orientation(t,r,a,d)}}),_;if(r='number'==typeof r?r:_._orientation[1],a='number'==typeof a?a:_._orientation[2],'undefined'==typeof d)if('number'==typeof t)_._orientation=[t,r,a];else return _._orientation;for(var l,u=_._getSoundIds(d),s=0;s<u.length;s++)if(l=_._soundById(u[s]),l)if('number'==typeof t)l._orientation=[t,r,a],l._node&&(!l._panner&&(!l._pos&&(l._pos=_._pos||[0,0,-0.5]),n(l,'spatial')),'undefined'==typeof l._panner.orientationX?l._panner.setOrientation(t,r,a):(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime))),_._emit('orientation',l._id);else return l._orientation;return _},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,a,d,_;if(!t._webAudio)return t;if(0===r.length)return t._pannerAttr;if(1!==r.length)2===r.length&&(a=r[0],d=parseInt(r[1],10));else if('object'==typeof r[0])a=r[0],'undefined'==typeof d&&(!a.pannerAttr&&(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),t._pannerAttr={coneInnerAngle:'undefined'==typeof a.pannerAttr.coneInnerAngle?t._coneInnerAngle:a.pannerAttr.coneInnerAngle,coneOuterAngle:'undefined'==typeof a.pannerAttr.coneOuterAngle?t._coneOuterAngle:a.pannerAttr.coneOuterAngle,coneOuterGain:'undefined'==typeof a.pannerAttr.coneOuterGain?t._coneOuterGain:a.pannerAttr.coneOuterGain,distanceModel:'undefined'==typeof a.pannerAttr.distanceModel?t._distanceModel:a.pannerAttr.distanceModel,maxDistance:'undefined'==typeof a.pannerAttr.maxDistance?t._maxDistance:a.pannerAttr.maxDistance,refDistance:'undefined'==typeof a.pannerAttr.refDistance?t._refDistance:a.pannerAttr.refDistance,rolloffFactor:'undefined'==typeof a.pannerAttr.rolloffFactor?t._rolloffFactor:a.pannerAttr.rolloffFactor,panningModel:'undefined'==typeof a.pannerAttr.panningModel?t._panningModel:a.pannerAttr.panningModel});else return _=t._soundById(parseInt(r[0],10)),_?_._pannerAttr:t._pannerAttr;for(var u=t._getSoundIds(d),s=0;s<u.length;s++)if(_=t._soundById(u[s]),_){var l=_._pannerAttr;l={coneInnerAngle:'undefined'==typeof a.coneInnerAngle?l.coneInnerAngle:a.coneInnerAngle,coneOuterAngle:'undefined'==typeof a.coneOuterAngle?l.coneOuterAngle:a.coneOuterAngle,coneOuterGain:'undefined'==typeof a.coneOuterGain?l.coneOuterGain:a.coneOuterGain,distanceModel:'undefined'==typeof a.distanceModel?l.distanceModel:a.distanceModel,maxDistance:'undefined'==typeof a.maxDistance?l.maxDistance:a.maxDistance,refDistance:'undefined'==typeof a.refDistance?l.refDistance:a.refDistance,rolloffFactor:'undefined'==typeof a.rolloffFactor?l.rolloffFactor:a.rolloffFactor,panningModel:'undefined'==typeof a.panningModel?l.panningModel:a.panningModel};var c=_._panner;c?(c.coneInnerAngle=l.coneInnerAngle,c.coneOuterAngle=l.coneOuterAngle,c.coneOuterGain=l.coneOuterGain,c.distanceModel=l.distanceModel,c.maxDistance=l.maxDistance,c.refDistance=l.refDistance,c.rolloffFactor=l.rolloffFactor,c.panningModel=l.panningModel):(!_._pos&&(_._pos=t._pos||[0,0,-0.5]),n(_,'spatial'))}return t},Sound.prototype.init=function(t){return function(){var r=this,a=r._parent;r._orientation=a._orientation,r._stereo=a._stereo,r._pos=a._pos,r._pannerAttr=a._pannerAttr,t.call(this),r._stereo?a.stereo(r._stereo):r._pos&&a.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var r=this,a=r._parent;return r._orientation=a._orientation,r._stereo=a._stereo,r._pos=a._pos,r._pannerAttr=a._pannerAttr,r._stereo?a.stereo(r._stereo):r._pos?a.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,a._refreshBuffer(r)),t.call(this)}}(Sound.prototype.reset);var n=function(t,r){r=r||'spatial','spatial'===r?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,'undefined'==typeof t._panner.positionX?t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]):(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)),'undefined'==typeof t._panner.orientationX?t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2]):(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime))):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}();